(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/address-manage"],{250:function(e,t,i){"use strict";(function(e,t){var n=i(4);i(26);n(i(25));var a=n(i(251));e.__webpack_require_UNI_MP_PLUGIN__=i,t(a.default)}).call(this,i(1)["default"],i(2)["createPage"])},251:function(e,t,i){"use strict";i.r(t);var n=i(252),a=i(254);for(var s in a)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i(256);var o,r=i(32),d=Object(r["default"])(a["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],o);d.options.__file="pages/address/address-manage.vue",t["default"]=d.exports},252:function(e,t,i){"use strict";i.r(t);var n=i(253);i.d(t,"render",(function(){return n["render"]})),i.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(t,"components",(function(){return n["components"]}))},253:function(e,t,i){"use strict";var n;i.r(t),i.d(t,"render",(function(){return a})),i.d(t,"staticRenderFns",(function(){return o})),i.d(t,"recyclableRender",(function(){return s})),i.d(t,"components",(function(){return n}));var a=function(){var e=this,t=e.$createElement;e._self._c},s=!1,o=[];a._withStripped=!0},254:function(e,t,i){"use strict";i.r(t);var n=i(255),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},255:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){Promise.all([i.e("common/vendor"),i.e("components/mpvue-citypicker/mpvueCityPicker")]).then(function(){return resolve(i(415))}.bind(null,i)).catch(i.oe)},a={components:{mpvueCityPicker:n},data:function(){return{edit_city_picker:!0,cityPickerValueDefault:[0,0,1],themeColor:"#007AFF",addressData:{pickerText:"",name:"",mobile:"",addressName:"",address:"",area:"",default:!1},addressList:[]}},onLoad:function(t){this.loadAddress();var i="新增收货地址";t.type,t.id&&(i="编辑收货地址",this.locateAddress(t.id)),e.setNavigationBarTitle({title:i})},methods:{onConfirm:function(e){this.addressData.pickerText=e.label},showMulLinkageThreePicker:function(){this.$refs.mpvueCityPicker.show()},locateAddress:function(t){var i=this;e.showLoading({title:"加载中"});var n=this.getUser()||{};if(!n.id)return e.hideLoading(),void this.$toast("请先登录");this.$get("/wx_mini_app/wx_auth/address/".concat(n.id,"/").concat(t),{},(function(t){if(e.hideLoading(),console.log("res",t),t&&200===t.code&&t.data){var n=t.data;i.addressData={id:n.id,name:n.receiver_name,mobile:n.receiver_phone,pickerText:"".concat(n.province," ").concat(n.city," ").concat(n.district).trim(),addressName:n.detail_address,default:1===n.is_default}}}),(function(t){e.hideLoading(),console.error("获取地址详情失败:",t),i.$toast("获取地址详情失败")}))},loadAddress:function(){var t=this;e.showLoading({title:"加载中"});var i=this.getUser()||{};if(!i.id)return e.hideLoading(),void this.$toast("请先登录");this.$get("/wx_mini_app/wx_auth/address/".concat(i.id),{},(function(i){e.hideLoading(),i&&200===i.code&&i.items?t.addressList=i.items:t.addressList=[]}),(function(i){e.hideLoading(),console.error("获取地址列表失败:",i),t.$toast("获取地址列表失败"),t.addressList=[]}))},switchChange:function(e){var t=this.addressList;if(console.log(!0===e.detail.value),!0===e.detail.value)for(var i in t){var n=t[i];n.default=!1}console.log(t),this.addressData.default=e.detail.value},chooseLocation:function(){var t=this;e.chooseLocation({success:function(e){t.addressData.addressName=e.name,t.addressData.address=e.name}})},confirm:function(){var t=this,i=this.addressData;if(i.name)if(/(^1[3|4|5|7|8|9][0-9]{9}$)/.test(i.mobile))if(i.pickerText)if(i.addressName){e.showLoading({title:"保存中"});var n=this.getUser()||{};if(!n.id)return e.hideLoading(),void this.$toast("请先登录");var a=i.pickerText.split("-"),s=a[0],o=a[1],r=a[2],d={user_id:String(n.id),receiver_name:i.name||null,receiver_phone:i.mobile||null,province:s,city:o,district:r,detail_address:i.addressName||null,postal_code:null,is_default:i.default?1:0};if(i.id){var c="/wx_mini_app/wx_auth/address/".concat(n.id,"/").concat(i.id);this.$put(c,d,(function(i){e.hideLoading(),200===i.code?(t.$toast("修改成功"),setTimeout((function(){e.navigateBack()}),800)):t.$toast(i.message||"修改失败")}),(function(i){e.hideLoading(),console.error("修改地址失败:",i),t.$toast("修改失败")}))}else{var u="/wx_mini_app/wx_auth/address/".concat(n.id);this.$post(u,d,(function(i){e.hideLoading(),console.log("result",i),200===i.code?(t.$toast("添加成功"),setTimeout((function(){e.navigateBack()}),800)):t.$toast(i.message||"添加失败")}),(function(i){e.hideLoading(),console.error("添加地址失败:",i),t.$toast("添加失败")}))}}else this.$toast("请填写详细地址");else this.$toast("请选择所在区域");else this.$toast("请输入正确的手机号码");else this.$toast("请填写收货人姓名")}}};t.default=a}).call(this,i(2)["default"])},256:function(e,t,i){"use strict";i.r(t);var n=i(257),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},257:function(e,t,i){}},[[250,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/address/address-manage.js.map