(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order-refund"],{258:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var r=o(n(259));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},259:function(t,e,n){"use strict";n.r(e);var o=n(260),r=n(262);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n(264);var a,s=n(32),u=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);u.options.__file="pages/order/order-refund.vue",e["default"]=u.exports},260:function(t,e,n){"use strict";n.r(e);var o=n(261);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},261:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));try{o={empty:function(){return n.e("components/empty/empty").then(n.bind(null,401))},uniLoadMore:function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,408))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.orderList.length),o=t.__map(t.navList,(function(e,n){var o=t.__get_orig(e),r=t.__map(t.orderList,(function(e,n){var o=t.__get_orig(e),r=e.goods.length,i=e.goods.length,a=t.getCount(e),s=t.getAmount(e);return{$orig:o,g1:r,g2:i,m0:a,m1:s}}));return{$orig:o,l0:r}})),r=!0===t.layer?t.logistics.length:null;t.$mp.data=Object.assign({},{$root:{g0:n,l1:o,g3:r}})},i=!1,a=[];r._withStripped=!0},262:function(t,e,n){"use strict";n.r(e);var o=n(263),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},263:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n(408))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/empty/empty").then(function(){return resolve(n(401))}.bind(null,n)).catch(n.oe)},i={components:{uniLoadMore:o,empty:r},data:function(){return{layer:!1,logi_corp:"",logi_no:"",logistics:[],logisterMap:{shentong:"申通",zhongtong:"中通",shunfeng:"顺风",yunda:"韵达",ziti:"自提"},tabCurrentIndex:1,navList:[{state:0,text:"全部",loadingType:"more",orderList:[]},{state:1,text:"待付款",loadingType:"more",orderList:[]},{state:2,text:"待发货",loadingType:"more",orderList:[]},{state:3,text:"待收货",loadingType:"more",orderList:[]},{state:4,text:"待评价",loadingType:"more",orderList:[]}],userInfo:{id:-1},cond:{pagesize:10,pagefrom:1,stat:""},orderList:[]}},onLoad:function(t){this.loadUserInfo(),this.tabCurrentIndex=+t.state,this.cond.stat=t.state,t.state},watch:{tabCurrentIndex:function(t,e){console.log(t,e);var n="";0!=t&&(n=t),this.cond.stat=n,this.reloadList()}},methods:{getAmount:function(t){var e=this.getGlistData(t);return e.amount},getCount:function(t){var e=this.getGlistData(t);return e.count},getGlistData:function(t){var e=0,n=0,o=t.goods;for(var r in o){var i=o[r],a=parseFloat(i.buyNum)*parseFloat(i.price);e+=a,n+=parseFloat(i.buyNum)}return{amount:e,count:n}},reject_product:function(e){t.navigateTo({url:"../order/return"})},reject_money:function(e){t.showModal({title:"提示",content:"亲，确定要发起退款嘛",success:function(n){if(n.confirm){var o={};o.id=e.id,o.refundStat=1;this.$post("order/update",o,(function(n){e.refundStat=1,t.showToast({title:"申请成功"})}))}else n.cancel&&console.log("用户点击取消")}})},urge:function(e){t.showToast({title:"已经发送催货信息给卖家，请耐心等待"})},toComment:function(e){t.navigateTo({url:"/pages/order/comment?id="+e.id})},powerDrawer:function(){this.layer=!1},view_logi:function(t){var e={};t.postDetail&&(e=JSON.parse(t.postDetail)),console.log(e);var n="https://www.kuaidi100.com/query";n="https://m.kuaidi100.com/query";var o={};if(o.url=n,o.type=e.type,o.postid=e.order,"ziti"!=o.type){this.logi_no=o.postid,this.logi_corp=o.type;var r=this.logisterMap,i="运单号码："+o.postid+",物流公司："+r[o.type];console.log(i);var a=this;this.$post("order/getlogimsg",o,(function(t){if(200==t.status){var e=JSON.parse(t.msg),n=e.data;console.log(n),a.logistics=n,a.layer=!0}}))}else alert("该订单的商品已经自提")},loadUserInfo:function(){this.userInfo=this.$dataLocal("user_info")},reloadList:function(){this.cond.pagefrom=1,this.orderList=[],this.loadList()},loadList:function(){var t={};t.pagefrom=this.cond.pagefrom,t.pagesize=this.cond.pagesize,t.stat=5,t.userId=this.userInfo.id;var e=this;this.$post("order/query",t,(function(t){var n=t.rows;for(var o in n){var r=n[o];r.goods=JSON.parse(r.goodsDetail)}var i=e.orderList,a=i.concat(n);e.orderList=a,console.log(a),n.length>0&&(e.cond.pagefrom=e.cond.pagefrom+1)}))},loadData:function(t){var e=this,n=this.tabCurrentIndex||0,o=this.navList[n],r=o.state;"tabChange"===t&&!0===o.loaded||"loading"!==o.loadingType&&(o.loadingType="loading",setTimeout((function(){var t=Json.orderList.filter((function(t){return t=Object.assign(t,e.orderStateExp(t.state)),0===r?t:t.state===r}));t.forEach((function(t){o.orderList.push(t)})),e.$set(o,"loaded",!0),o.loadingType="more"}),600))},changeTab:function(t){this.tabCurrentIndex=t.target.current,this.loadData("tabChange")},tabClick:function(t,e){console.log(t),this.tabCurrentIndex=e},update_stat:function(e,n){var o={};o.id=e,o.stat=n;this.$post("order/update",o,(function(e){t.showToast({title:"操作成功"})}))},pay_success:function(t){t.stat=2,this.update_stat(t.id,2)},receive:function(t){t.stat=4,this.update_stat(t.id,4)},pay:function(e){var n=e.id,o=e.amount-e.benefit+e.postage;t.redirectTo({url:"/pages/money/pay?order_id="+n+"&money="+o})},deleteOrder:function(t){},cancelOrder:function(e){var n={};n.id=e.id,n.isValid=0;var o=this;this.$post("order/update",n,(function(n){o.deleteItem(e),t.showToast({title:"操作成功"})}))},deleteItem:function(t){var e=this.orderList;for(var n in e){var o=e[n];o.id===t.id&&e.splice(n,1)}},orderStateExp:function(t){var e="",n="#fa436a";switch(+t){case 1:e="待付款";break;case 2:e="待发货";break;case 9:e="订单已关闭",n="#909399";break}return{stateTip:e,stateTipColor:n}}}};e.default=i}).call(this,n(2)["default"])},264:function(t,e,n){"use strict";n.r(e);var o=n(265),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},265:function(t,e,n){}},[[258,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/order-refund.js.map