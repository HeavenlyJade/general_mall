(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/detail"],{202:function(t,i,o){"use strict";(function(t,i){var s=o(4);o(26);s(o(25));var e=s(o(203));t.__webpack_require_UNI_MP_PLUGIN__=o,i(e.default)}).call(this,o(1)["default"],o(2)["createPage"])},203:function(t,i,o){"use strict";o.r(i);var s=o(204),e=o(206);for(var n in e)["default"].indexOf(n)<0&&function(t){o.d(i,t,(function(){return e[t]}))}(n);o(208);var a,r=o(32),c=Object(r["default"])(e["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],a);c.options.__file="pages/goods/detail.vue",i["default"]=c.exports},204:function(t,i,o){"use strict";o.r(i);var s=o(205);o.d(i,"render",(function(){return s["render"]})),o.d(i,"staticRenderFns",(function(){return s["staticRenderFns"]})),o.d(i,"recyclableRender",(function(){return s["recyclableRender"]})),o.d(i,"components",(function(){return s["components"]}))},205:function(t,i,o){"use strict";var s;o.r(i),o.d(i,"render",(function(){return e})),o.d(i,"staticRenderFns",(function(){return a})),o.d(i,"recyclableRender",(function(){return n})),o.d(i,"components",(function(){return s}));try{s={ownShare:function(){return o.e("components/own-share/own-share").then(o.bind(null,394))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var e=function(){var t=this,i=t.$createElement,o=(t._self._c,t.__map(t.imgList,(function(i,o){var s=t.__get_orig(i),e=i.src.indexOf(".mp4"),n=i.src.indexOf(".mp4");return{$orig:s,g0:e,g1:n}}))),s=t.commentDetail.length;t.$mp.data=Object.assign({},{$root:{l0:o,g2:s}})},n=!1,a=[];e._withStripped=!0},206:function(t,i,o){"use strict";o.r(i);var s=o(207),e=o.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){o.d(i,t,(function(){return s[t]}))}(n);i["default"]=e.a},207:function(t,i,o){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){o.e("components/own-share/own-share").then(function(){return resolve(o(394))}.bind(null,o)).catch(o.oe)},e={components:{ownShare:s},data:function(){var t=this.getConst();return{conf:t,specClass:"none",specSelected:[],favorite:!0,shareList:[],imgList:[{src:""}],descriptionNode:[],goodsData:{id:1,name:"",price:"",number:1},commentDetail:[],skuList:[],color:[],size:[],cur_color:"",cur_size:"",cur_sku:{},userInfo:{id:-1},submit_lock:0,cartList:[],collect_list:[],showCommet:!1,hasTapBuy:!1,shareobj:{shareSummary:"我正在使用HBuilderX开发uni-app，赶紧跟我一起来体验！",image:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/images/uni@2x.png",title:"uni-app分享",href:"http://uniapp.dcloud.io/",miniProgram:{},webUrl:"webUrl"}}},onShow:function(){this.hasTapBuy=!1},onLoad:function(t){console.log("options",t),this.loadUserInfo();var i=t.id;this.findGoods(i),this.loadCollectList()},onNavigationBarButtonTap:function(t){var i=t.index;0===i&&this.openshare()},methods:{tocopy:function(){var t=this.getConst().host+"wxh5/#/pages/goods/detail?id="+this.goodsData.id+"&guider="+this.userInfo.id;t="http://djk.51gang.top/appmkt/tjk/androidapk.html";var i="复制下面的链接，发送给你朋友赚取佣金\n";i=i+this.goodsData.name+"============\n",i+=t,this.$Copy(i)},initshareobj:function(t){this.shareobj.title="搭健康",this.shareobj.shareSummary="点击链接下载搭健康商城",this.shareobj.image=this.getConst().host+"images/icon.png";var i=this.getConst().host+"wxh5/#/pages/goods/detail?id="+this.goodsData.id+"&guider="+this.userInfo.id;i="http://djk.51gang.top/appmkt/tjk/androidapk.html",this.shareobj.href=i},openshare:function(t){this.tocopy(),this.$refs.share.open()},switch_show_comment:function(){this.showCommet=!this.showCommet},sale_once:function(t){this.$post("goods/addsale",{id:t},(function(t){}))},look_once:function(t){this.$post("goods/addlook",{id:t},(function(t){}))},getCartList:function(){var i=this;this.$isNull(this.userInfo.id)||this.$get("/wx_mini_app/shop-cart",{},(function(o){if(200===o.code){var s=o.data||[];s.forEach((function(t){t.checked=!1,t.loaded=""})),i.cartList=s,i.count(),i.allChecked=!1}else t.showToast({title:o.msg||"购物车数据加载失败",icon:"none"})}),(function(i){t.showToast({title:"购物车数据加载失败",icon:"none"})}),!0)},loadUserInfo:function(){var t=this.getUser();this.userInfo=t},splitColorAndSize:function(t){var i=[],o=[],s=t;for(var e in s){var n=s[e],a=n.sku,r=a.split(",");i=this.$pushNoRepeat(i,r[0]),o=this.$pushNoRepeat(o,r[1])}var c={};return c.color=i,c.size=o,c},specColorAndSize:function(t){var i=this.splitColorAndSize(t);this.skuList=t,this.color=i.color,this.size=i.size,this.cur_color=this.color[0],this.cur_size=this.size[0];this.goodsData.id;var o=null;null!=o&&(this.cur_size=o),this.setCurSkuInitPrice()},setCurSkuInitPrice:function(){var t=this.cur_color,i=this.cur_size,o=t+","+i,s=this.skuList;for(var e in s){var n=s[e];o==n.sku&&(this.cur_sku=n)}},setCurSku:function(){var t=this.cur_color,i=this.cur_size,o=t+","+i,s=this.skuList;for(var e in s){var n=s[e];o==n.sku&&(this.cur_sku=n)}},findGoods:function(t){var i=this,o={};o.id=t,this.$get("/wx_mini_app/wx_shop/shop-product/"+t,o,(function(t){var o=t.data,s=[];if(o.images&&o.images.length>0)for(var e in o.images){var n={};n.id=e,n.src=o.images[e],s.push(n)}i.imgList=s,"string"===typeof o.detail?i.descriptionNode=o.detail:o.detail&&(i.descriptionNode=JSON.stringify(o.detail)),s.length>0&&(o.image=s[0].src),o.service=[{name:"正品保证",description:"此商品官方保证为正品"},{name:"极速发货",description:"此商品享受退货极速发货服务"},{name:"7天退换",description:"此商品享受7天无理由退换服务"}],o.promotion=[{name:"此商品官方保证为正品"},{name:"享受退货极速发货服务"},{name:"此商品享受7天无理由退换服务"}],i.goodsData=o}))},loadOrderList:function(t){var i={};i.goodsId=t;var o=this;this.$post("order/query",i,(function(t){var i=t.rows;for(var s in i){var e=i[s];if(o.getConst().sucComment==e.commentStat){var n={};if(e.commentDetail){n=JSON.parse(e.commentDetail);var a=JSON.parse(e.cusDetail),r={};console.log(n),r.userface=a.headimage||"http://img3.imgtn.bdimg.com/it/u=1150341365,1327279810&fm=26&gp=0.jpg",r.username=a.nickname||"uname",r.content=n.context,r.imgList=n.img_list,o.commentDetail.push(r)}}}}))},toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout((function(){t.specClass="none",1==t.hasTapBuy&&t.buy()}),250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(t,i){1==t?this.cur_color=i:2==t&&(this.cur_size=i),this.setCurSku()},share:function(){if(this.$isNull(this.userInfo.id))return this.$navigateTo("/pages/login/login"),void this.$toast("请先登陆");this.$navigateTo("/pages/chat/chat")},loadCollectList:function(){this.collect_list=this.$dataLocal("collect_list")||[]},IsCollectGoods:function(t){var i=this.collect_list,o=!1;for(var s in i){var e=i[s];e.id===t&&(o=!0)}this.favorite=o},toFavorite:function(){var t=this.collect_list;if(!1===this.favorite){var i={};i.id=this.goodsData.id;var o=this;this.$post("/goods/addcollect",i,(function(i){t.push(o.goodsData),o.$dataLocal("collect_list",t)})),this.favorite=!this.favorite}else t=this.$delArrItemByKv(t,"id",this.goodsData.id),this.$dataLocal("collect_list",t),this.favorite=!this.favorite},cart:function(){if(this.$isNull(this.userInfo.id))return this.$navigateTo("/pages/login/login"),void this.$toast("请先登陆");var i={};i.sku_id=this.goodsData.id,i.product_count=1;var o=0;for(var s in this.cartList){var e=this.cartList[s];e.sku_id===goods.id&&(o=1)}1!==o&&1!=this.submit_lock?(this.submit_lock=1,this.$post("/wx_mini_app/shop-cart",i,(function(i){console.log("res",i),t.showToast({title:"操作成功"})}))):this.$toast("已经加入购物车啦")},buy:function(){if(this.$isNull(this.userInfo.id))return this.$toast("请先登陆"),void this.$navigateTo("/pages/login/login");var t={},i=this.goodsData;t.goods=i,t.number=1;var o=[];o.push(t),this.$dataLocal("buy_list",o),this.$navigateTo("/pages/order/create")},stopPrevent:function(){}}};i.default=e}).call(this,o(2)["default"])},208:function(t,i,o){"use strict";o.r(i);var s=o(209),e=o.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){o.d(i,t,(function(){return s[t]}))}(n);i["default"]=e.a},209:function(t,i,o){}},[[202,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/goods/detail.js.map